{% extends "base.html" %}
{% block content %}
<section class="card">
    <h2>Results</h2>
    <p><strong>Job Description (excerpt):</strong> {{ job_desc[:300] }}{% if job_desc|length > 300 %}...{% endif %}</p>
    <div class="results-table">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Candidate</th>
                    <th>Final Score</th>
                    <th>Similarity</th>
                    <th>Matched Skills</th>
                    <th>Experience (years)</th>
                    <th>Seniority</th>
                    <th>Education</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ result.filename }}</td>
                    <td>{{ result.final_score }}%</td>
                    <td>{{ result.similarity }}%</td>
                    <td>{{ result.matched_skills | join(', ') if result.matched_skills else '—' }}</td>
                    <td>{{ result.experience_years }}</td>
                    <td>{{ result.seniority or '—' }}</td>
                    <td>{{ result.education or '—' }}</td>
                </tr>
                <tr class="reason-row">
                    <td></td>
                    <td colspan="7"><em>Reason:</em> {{ result.reason }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <a class="button" href="{{ url_for('index') }}">Back</a>
</section>
{% endblock %}